#include <stdio.h>
#include <stdlib.h>

/* count 1 bits in x */
int bitcount(unsigned x) {
    int b;
    for(b = 0; x != 0; x>>=1)
        if (x & 01)
            b++;
    return b;
}

/* 
fast version of count bits
x&=(x-1) 
1. 当x是奇数 x-1 == x&(x-1) 效果相同, 特别的如果只剩1bit，则x=0;参考2^n 64,32
2. 当x是偶数 会清除最右边的1-bit

python
n = 100
def b(x):
    '{0:b}'.format(x)
while n > 0:
    '%2d %10s %2d %10s'%(n, b(n), (n)&(n-1), b((n)&(n-1)))
    n -= 1

'100   1100100 96    1100000'
'99    1100011 98    1100010'
'98    1100010 96    1100000'
'97    1100001 96    1100000'
'96    1100000 64    1000000'
'95    1011111 94    1011110'
'94    1011110 92    1011100'
'93    1011101 92    1011100'
'92    1011100 88    1011000'
'91    1011011 90    1011010'
'90    1011010 88    1011000'
'89    1011001 88    1011000'
'88    1011000 80    1010000'
'87    1010111 86    1010110'
'86    1010110 84    1010100'
'85    1010101 84    1010100'
'84    1010100 80    1010000'
'83    1010011 82    1010010'
'82    1010010 80    1010000'
'81    1010001 80    1010000'
'80    1010000 64    1000000'
'79    1001111 78    1001110'
'78    1001110 76    1001100'
'77    1001101 76    1001100'
'76    1001100 72    1001000'
'75    1001011 74    1001010'
'74    1001010 72    1001000'
'73    1001001 72    1001000'
'72    1001000 64    1000000'
'71    1000111 70    1000110'
'70    1000110 68    1000100'
'69    1000101 68    1000100'
'68    1000100 64    1000000'
'67    1000011 66    1000010'
'66    1000010 64    1000000'
'65    1000001 64    1000000'
'64    1000000  0          0'
'63     111111 62     111110'
'62     111110 60     111100'
'61     111101 60     111100'
'60     111100 56     111000'
'59     111011 58     111010'
'58     111010 56     111000'
'57     111001 56     111000'
'56     111000 48     110000'
'55     110111 54     110110'
'54     110110 52     110100'
'53     110101 52     110100'
'52     110100 48     110000'
'51     110011 50     110010'
'50     110010 48     110000'
'49     110001 48     110000'
'48     110000 32     100000'
'47     101111 46     101110'
'46     101110 44     101100'
'45     101101 44     101100'
'44     101100 40     101000'
'43     101011 42     101010'
'42     101010 40     101000'
'41     101001 40     101000'
'40     101000 32     100000'
'39     100111 38     100110'
'38     100110 36     100100'
'37     100101 36     100100'
'36     100100 32     100000'
'35     100011 34     100010'
'34     100010 32     100000'
'33     100001 32     100000'
'32     100000  0          0'
'31      11111 30      11110'
'30      11110 28      11100'
'29      11101 28      11100'
'28      11100 24      11000'
'27      11011 26      11010'
'26      11010 24      11000'
'25      11001 24      11000'
'24      11000 16      10000'
'23      10111 22      10110'
'22      10110 20      10100'
'21      10101 20      10100'
'20      10100 16      10000'
'19      10011 18      10010'
'18      10010 16      10000'
'17      10001 16      10000'
'16      10000  0          0'
'15       1111 14       1110'
'14       1110 12       1100'
'13       1101 12       1100'
'12       1100  8       1000'
'11       1011 10       1010'
'10       1010  8       1000'
' 9       1001  8       1000'
' 8       1000  0          0'
' 7        111  6        110'
' 6        110  4        100'
' 5        101  4        100'
' 4        100  0          0'
' 3         11  2         10'
' 2         10  0          0'
' 1          1  0          0'

 */
int bitcount2(unsigned x) {
    int b;
    for(b = 0; x != 0; x &= (x-1))
        b++;
    return b;
}

int main(int argc, char *argv[]) {
    unsigned x = strtol(argv[1], NULL, 10);
    printf("%d\n", x);
    printf("%d\n", bitcount(x));
    printf("%d\n", bitcount2(x));
    return 0;
}